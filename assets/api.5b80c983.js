import{S as a}from"./VContainer.12e11d6d.js";const r={baseEndpoint:"https://dull-threads-fly.cyclic.app"},n={getAsync:(e,t,s,i)=>fetch(`${r.baseEndpoint}${t}/?accessToken=${e}${c(s)}`,{signal:AbortSignal.timeout(i||3e4)}),postAsync:(e,t,s)=>fetch(`${r.baseEndpoint}${t}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e),signal:AbortSignal.timeout(s||2e4)}),refreshToken:e=>fetch(`${r.baseEndpoint}/refreshToken?refreshToken=${e}`,{signal:AbortSignal.timeout(1e4)})},c=e=>{let t="";return e==null||e.length==0||e.forEach(s=>{t+=`&${s.key}=${s.value}`}),t},l={async verifyToken(){return await n.getAsync(a.GetAccessToken(),"/api/verify")},async refreshToken(){const e=await n.refreshToken(a.GetRefreshToken());if(!e.ok)throw{response:e};const t=await e.text();return a.UpdateAccessToken(t),t},async getDisplayName(){},async getAllPlaylists(e,t=!1){const s=[];return e&&s.push({key:"offset",value:e.toString()}),t&&s.push({key:"cache",value:new Date().getTime().toString()}),await n.getAsync(a.GetAccessToken(),"/api/playlists/all",s.length?s:void 0)},async getPlaylistOverview(e){return await n.getAsync(a.GetAccessToken(),"/api/playlists/overview",[{key:"id",value:e}])},async getPlaylistData(e){return await n.getAsync(a.GetAccessToken(),"/api/playlists",[{key:"id",value:e}],6e4)},async postUserDetails(e){return await n.postAsync(e,"/requestAccess")},async pollForCurrentTrack(){return await n.getAsync(a.GetAccessToken(),"/api/player/current")},async getPlaylistName(e){return await n.getAsync(a.GetAccessToken(),"/api/playlists/name",[{key:"id",value:e}])},async getTrackAnalysis(e){return await n.getAsync(a.GetAccessToken(),"/api/player/current/analysis",[{key:"id",value:e}])}};export{l as A,r as s};
