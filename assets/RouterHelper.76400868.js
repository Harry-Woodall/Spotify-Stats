import{J as r}from"./index.41bbef0a.js";import{E as n}from"./VContainer.8f559310.js";import{A as i}from"./api.f8d8488d.js";const g={isResponseError(e){return typeof e=="object"&&e!=null&&"response"in e},isAbortError(e){return typeof e=="object"&&e!=null&&"name"in e&&e.name=="AbortError"},isGenericError(e){return typeof e=="object"&&e!=null&&"message"in e}},c={DestroyLocalStorage(){localStorage.removeItem(r.ACCESS_TOKEN),localStorage.removeItem(r.REFRESH_TOKEN)},DestroySessionStorage(){sessionStorage.removeItem(r.OVERVIEW_DATA)},TokenExists(){return localStorage.getItem(r.ACCESS_TOKEN)&&localStorage.getItem(r.REFRESH_TOKEN)},SetToken(e,t){localStorage.setItem(r.ACCESS_TOKEN,e),localStorage.setItem(r.REFRESH_TOKEN,t)},UpdateAccessToken(e){localStorage.setItem(r.ACCESS_TOKEN,e)},GetAccessToken(){const e=localStorage.getItem(r.ACCESS_TOKEN);if(!e)throw{message:n.NO_TOKEN};return e},GetRefreshToken(){const e=localStorage.getItem(r.REFRESH_TOKEN);if(!e)throw{message:n.NO_TOKEN};return e},StoreOverviewData(e){const t=new Date;t.setTime(t.getTime()+30*60*1e3),e.overviewData.sort((a,s)=>a.index-s.index);const o={cacheTime:t.getTime(),overviewStorageData:e};sessionStorage.setItem(r.OVERVIEW_DATA,JSON.stringify(o))},GetOverviewData(){const e=sessionStorage.getItem(r.OVERVIEW_DATA);if(!e)return null;const t=JSON.parse(e);return new Date().getTime()>t.cacheTime?null:t.overviewStorageData},ClearOverviewData(){sessionStorage.removeItem(r.OVERVIEW_DATA)}},E={MapStatusCodes(e){switch(e){case 400:return"Bad Request";case 401:return"Unauthorized";case 403:return"User forbidden to access this site";case 429:return"Rate limit exceeded";default:return"Internal server error"}}},u={async HandleErrorResponse(e,t,o){let a=t.statusText;switch(t.status&&t.statusText==""&&(a=E.MapStatusCodes(t.status)),t.status){case 401:try{await i.refreshToken()}catch{c.DestroyLocalStorage(),c.DestroySessionStorage(),e.push("/")}o();break;default:e.push(`/error?status=${t.status}&message=${a}`);break}}};export{g as E,u as R};
